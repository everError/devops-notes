# ğŸ§° Terraform ê¸°ë³¸ ëª…ë ¹ì–´ ì •ë¦¬

Terraformì€ ì„ ì–¸í˜• êµ¬ì„± íŒŒì¼ì„ ì‚¬ìš©í•´ ì¸í”„ë¼ë¥¼ ìë™ìœ¼ë¡œ ë°°í¬/ê´€ë¦¬í•˜ëŠ” ë„êµ¬ì…ë‹ˆë‹¤. ì•„ë˜ëŠ” Terraform ì‚¬ìš© ì‹œ ê°€ì¥ ê¸°ë³¸ì´ ë˜ëŠ” ëª…ë ¹ì–´ë“¤ì˜ ì„¤ëª…ê³¼ ì˜ˆì‹œì…ë‹ˆë‹¤.

---

## ğŸ“Œ 1. `terraform init`

> í˜„ì¬ ì‘ì—… ë””ë ‰í† ë¦¬ë¥¼ Terraform ì‘ì—… í™˜ê²½ìœ¼ë¡œ ì´ˆê¸°í™”í•©ë‹ˆë‹¤. í•„ìš”í•œ provider í”ŒëŸ¬ê·¸ì¸ì„ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤.

```bash
terraform init
```

- `.terraform/` ë””ë ‰í† ë¦¬ ìƒì„±
- `.terraform.lock.hcl` íŒŒì¼ ìƒì„±

### ğŸ”¹ `-upgrade` ì˜µì…˜

```bash
terraform init -upgrade
```

- ì´ë¯¸ ì„¤ì¹˜ëœ provider ë²„ì „ì´ ìˆë”ë¼ë„, `required_providers` ë¸”ë¡ì— ì§€ì •ëœ ì¡°ê±´ì— ë§ì¶° **ìµœì‹  ë²„ì „ìœ¼ë¡œ ê°•ì œ ì—…ê·¸ë ˆì´ë“œ**í•©ë‹ˆë‹¤.
- `.terraform.lock.hcl` íŒŒì¼ë„ ê°±ì‹ ë©ë‹ˆë‹¤.
- ì£¼ë¡œ provider ë²„ì „ì„ ë³€ê²½í–ˆê±°ë‚˜, ìµœì‹  providerë¥¼ ê°•ì œë¡œ ì ìš©í•˜ê³ ì í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.

### ğŸ”¹ `-reconfigure` ì˜µì…˜

```bash
terraform init -reconfigure
```

- ê¸°ì¡´ì˜ backend ì„¤ì •ì„ ë¬´ì‹œí•˜ê³  **ë‹¤ì‹œ ì´ˆê¸°í™”**í•©ë‹ˆë‹¤.
- ë¡œì»¬ ìƒíƒœì™€ ë°±ì—”ë“œ ìƒíƒœ ì—°ê²°ì„ ìƒˆë¡œ êµ¬ì„±í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤.
- `.terraform` ë‚´ë¶€ ì„¤ì •ì´ ë°”ë€Œì—ˆê±°ë‚˜ ë°±ì—”ë“œë¥¼ ë³€ê²½í•œ ê²½ìš° ì‚¬ìš©

### ğŸ”¹ `-migrate-state` ì˜µì…˜

```bash
terraform init -migrate-state
```

- ë°±ì—”ë“œ êµ¬ì„±ì´ ë³€ê²½ëœ ê²½ìš°, **ê¸°ì¡´ ìƒíƒœ íŒŒì¼(.tfstate)ì„ ìƒˆë¡œìš´ backendë¡œ ì´ë™**ì‹œí‚µë‹ˆë‹¤.
- ë³´í†µ `-reconfigure`ì™€ í•¨ê»˜ ì‚¬ìš©ë¨
- ìˆ˜ë™ìœ¼ë¡œ ìƒíƒœë¥¼ ì˜®ê¸°ì§€ ì•Šê³ ë„ ì•ˆì „í•˜ê²Œ ìƒíƒœë¥¼ ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ëŠ¥

---

## ğŸ“Œ 2. `terraform plan`

> êµ¬ì„± íŒŒì¼ì— ì •ì˜ëœ ë³€ê²½ ì‚¬í•­ì„ ì‹¤í–‰í•˜ì§€ ì•Šê³  ë¯¸ë¦¬ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```bash
terraform plan
```

- ì‹¤ì œ ë¦¬ì†ŒìŠ¤ ë³€ê²½ ì „ ì‚¬ì „ ì‹œë®¬ë ˆì´ì…˜
- ë³€ê²½, ìƒì„±, ì‚­ì œë  ë¦¬ì†ŒìŠ¤ë¥¼ ë¯¸ë¦¬ í™•ì¸ ê°€ëŠ¥

---

## ğŸ“Œ 3. `terraform apply`

> êµ¬ì„± íŒŒì¼ì„ ê¸°ë°˜ìœ¼ë¡œ ì‹¤ì œ ì¸í”„ë¼ë¥¼ ìƒì„±/ë³€ê²½í•©ë‹ˆë‹¤.

```bash
terraform apply
```

- `terraform plan` ë‹¨ê³„ì—ì„œ ë³´ì—¬ì¤€ ë³€ê²½ ì‚¬í•­ì„ ì ìš©
- ì‚¬ìš©ì ì…ë ¥ ì—†ì´ ìë™ ì ìš©í•˜ë ¤ë©´ `-auto-approve` ì˜µì…˜ ì‚¬ìš©

```bash
terraform apply -auto-approve
```

---

## ğŸ“Œ 4. `terraform destroy`

> Terraformìœ¼ë¡œ ìƒì„±í•œ ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.

```bash
terraform destroy
```

- ì‚¬ìš©ì ì…ë ¥ ì—†ì´ ìë™ ì‚­ì œí•˜ë ¤ë©´ `-auto-approve` ì˜µì…˜ ì‚¬ìš©

---

## ğŸ“Œ 5. `terraform validate`

> `.tf` íŒŒì¼ì˜ ë¬¸ë²• ë° êµ¬ì„± ì˜¤ë¥˜ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.

```bash
terraform validate
```

---

## ğŸ“Œ 6. `terraform fmt`

> ì½”ë“œ ìŠ¤íƒ€ì¼ì„ ìë™ìœ¼ë¡œ ì •ë¦¬í•´ì¤ë‹ˆë‹¤.

```bash
terraform fmt
```

---

## ğŸ“Œ 7. `terraform output`

> `output` ë¸”ë¡ì— ì •ì˜í•œ ê°’ì„ ì¡°íšŒí•©ë‹ˆë‹¤.

```bash
terraform output
```

- ê°œë³„ ì¶œë ¥ ê°’ í™•ì¸:

```bash
terraform output <key>
```

---

## ğŸ“Œ 8. `terraform state`

> í˜„ì¬ ìƒíƒœíŒŒì¼(`terraform.tfstate`)ì„ ì¡°íšŒí•˜ê±°ë‚˜ ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” ëª…ë ¹ì–´ì…ë‹ˆë‹¤.

```bash
terraform state list      # ê´€ë¦¬ ì¤‘ì¸ ë¦¬ì†ŒìŠ¤ ëª©ë¡ ë³´ê¸°
terraform state show ...  # íŠ¹ì • ë¦¬ì†ŒìŠ¤ ìƒíƒœ ë³´ê¸°
```

---

## ğŸ“Œ 9. `terraform taint` (Terraform v1.0 ì´í•˜)

> ë¦¬ì†ŒìŠ¤ë¥¼ ê°•ì œë¡œ ë‹¤ì‹œ ìƒì„±í•˜ë„ë¡ í‘œì‹œí•©ë‹ˆë‹¤. (v1.1 ì´ìƒì—ì„œëŠ” `terraform apply -replace` ì‚¬ìš© ê¶Œì¥)

```bash
terraform taint aws_instance.my_instance
```

---

## ğŸ“Œ 10. `terraform graph`

> ë¦¬ì†ŒìŠ¤ ê°„ì˜ ì˜ì¡´ì„± ê·¸ë˜í”„ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

```bash
terraform graph | dot -Tpng > graph.png
```

- `Graphviz` ì„¤ì¹˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.

---

## ğŸ“Œ 11. `terraform version`

> Terraformì˜ í˜„ì¬ ë²„ì „ì„ í™•ì¸í•©ë‹ˆë‹¤.

```bash
terraform version
```

---

## âœ… ëª…ë ¹ì–´ ìš”ì•½ í‘œ

| ëª…ë ¹ì–´               | ì„¤ëª…                       |
| -------------------- | -------------------------- |
| `terraform init`     | ì‘ì—… ë””ë ‰í† ë¦¬ ì´ˆê¸°í™”       |
| `terraform plan`     | ë³€ê²½ ì‚¬í•­ ë¯¸ë¦¬ ë³´ê¸°        |
| `terraform apply`    | ì‹¤ì œ ë¦¬ì†ŒìŠ¤ ìƒì„±/ë³€ê²½      |
| `terraform destroy`  | ë¦¬ì†ŒìŠ¤ ì‚­ì œ                |
| `terraform validate` | êµ¬ì„± íŒŒì¼ ë¬¸ë²• í™•ì¸        |
| `terraform fmt`      | ì½”ë“œ í¬ë§· ì •ë¦¬             |
| `terraform output`   | ì¶œë ¥ ê°’ í™•ì¸               |
| `terraform state`    | ìƒíƒœ íŒŒì¼ ì •ë³´ ì¡°íšŒ/ìˆ˜ì •   |
| `terraform graph`    | ë¦¬ì†ŒìŠ¤ ê°„ ì˜ì¡´ ê´€ê³„ ì‹œê°í™” |
| `terraform version`  | ë²„ì „ í™•ì¸                  |

---

> Terraformì„ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë ¤ë©´ `init â†’ plan â†’ apply â†’ output` íë¦„ì— ìµìˆ™í•´ì§€ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.
