# ⚙️ Docker vs Podman/Buildah: 데몬과 컨테이너 구조 개념 정리

## ✅ 데몬(Daemon)이란?

- **항상 백그라운드에서 실행**되며 요청을 대기하고 처리하는 **서비스형 프로세스**
- 리눅스에서는 보통 `d`로 끝나는 이름을 가짐 (ex: `dockerd`, `sshd`, `systemd`)
- 예: `dockerd`는 Docker 명령 요청을 받아 컨테이너를 실행함

```bash
# 예시: docker run 명령이 실제로 하는 일
[CLI] docker run nginx ─▶ [Daemon] dockerd ─▶ 컨테이너 생성
```

---

## 🐳 Docker는 데몬 기반 구조

| 구성 요소        | 설명                                                |
| ---------------- | --------------------------------------------------- |
| `docker` (CLI)   | 사용자가 입력하는 명령어 인터페이스                 |
| `dockerd` (데몬) | 백그라운드에서 모든 요청을 처리하고 컨테이너를 실행 |
| 동작 방식        | 클라이언트-서버 구조 (CLI → API → 데몬)             |

> ✅ 장점: 복잡한 작업을 데몬이 중앙에서 관리함
> ❌ 단점: 항상 실행 중이며, 대부분 root 권한을 사용 → 보안상 위험

---

## 🔧 Podman / Buildah는 데몬리스 구조

| 도구        | 데몬 사용 여부 | 설명                                          |
| ----------- | -------------- | --------------------------------------------- |
| **Podman**  | ❌ No          | Docker 호환 CLI, 데몬 없이 컨테이너 직접 제어 |
| **Buildah** | ❌ No          | 이미지 빌드 전문 도구, 데몬 없이 이미지 생성  |

### 🧩 구조 비교

```plaintext
[Podman / Buildah]
→ 명령 실행 시 사용자 권한으로 직접 컨테이너 또는 이미지 작업 수행
→ 별도 데몬 없음 (실행과 동시에 필요한 작업만 수행)
```

> ✅ 장점: 경량, 보안성 우수 (rootless 가능)
> ❌ 단점: 일부 복잡한 기능은 수동 설정 필요

---

## 🔍 주요 차이점 요약

| 항목            | Docker                | Podman / Buildah                   |
| --------------- | --------------------- | ---------------------------------- |
| 데몬 필요 여부  | ✅ 필요 (`dockerd`)   | ❌ 불필요 (데몬리스)               |
| 보안            | root 권한 필요 (기본) | 일반 사용자로 실행 가능 (rootless) |
| CLI 인터페이스  | `docker`              | `podman`, `buildah`                |
| 백그라운드 동작 | 항상 실행             | 명령 실행 시만 동작                |
| 호환성          | 독립적 생태계         | Podman은 Docker와 CLI 호환됨       |

---

## 📌 언제 무엇을 쓸까?

| 목적                  | 추천 도구 | 이유                                    |
| --------------------- | --------- | --------------------------------------- |
| 빠르고 편한 개발 환경 | Docker    | 친숙한 CLI, 생태계 풍부                 |
| 보안성 중시 / 서버용  | Podman    | rootless 모드 가능, 데몬 없음           |
| CI에서 이미지 빌드만  | Buildah   | 이미지 빌드 전용, 경량, 스크립트에 적합 |
